(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{341:function(a,s,t){"use strict";t.r(s);var r=t(7),e=Object(r.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"下载-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载-安装"}},[a._v("#")]),a._v(" 下载&安装")]),a._v(" "),s("p",[a._v("官方下载地址："),s("a",{attrs:{href:"https://www.rabbitmq.com/download.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://www.rabbitmq.com/download.html"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("在安装之前需要先安装Erlang环境")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://file.qaomuu.com/blog/0TU2VbcIOH4BnVOQe4s5kDOWCbldIBuJrGN9OfmU8NM.png",alt:"image"}})]),a._v(" "),s("p",[a._v("上传到"),s("code",[a._v("/usr/local/software")]),a._v("目录下(如果没有 software 需要自己创建)，执行"),s("code",[a._v("uname -a")]),a._v("可以查看当前系统版本是el7，和下载的安装包是符合。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://file.qaomuu.com/blog/_7-_156gf1aLeA3JNEN-1UFVWKIyDuet6nqfo5D7yIQ.png",alt:"image"}})]),a._v(" "),s("p",[a._v("安装命令，按顺序安装：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ivh")]),a._v(" erlang-21.3-1.el7.x86_64.rpm\nyum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" socat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ivh")]),a._v(" rabbitmq-server-3.8.8-1.el7.noarch.rpm\n")])])]),s("h2",{attrs:{id:"常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[a._v("#")]),a._v(" 常用命令")]),a._v(" "),s("h3",{attrs:{id:"添加开机启动-rabbitmq-服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加开机启动-rabbitmq-服务"}},[a._v("#")]),a._v(" 添加开机启动 RabbitMQ 服务")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chkconfig")]),a._v(" rabbitmq-server on\n")])])]),s("h3",{attrs:{id:"启动服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动服务"}},[a._v("#")]),a._v(" 启动服务")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("/sbin/service rabbitmq-server start\n")])])]),s("h3",{attrs:{id:"查看服务状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看服务状态"}},[a._v("#")]),a._v(" 查看服务状态")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("/sbin/service rabbitmq-server status\n")])])]),s("p",[s("img",{attrs:{src:"https://file.qaomuu.com/blog/T_qzmKHeIxYwrFRBNeuTVhxhCFh3Kkwgo7jkQowckoM.png",alt:"image"}})]),a._v(" "),s("h3",{attrs:{id:"停止服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#停止服务"}},[a._v("#")]),a._v(" 停止服务")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("/sbin/service rabbitmq-server stop\n")])])]),s("h3",{attrs:{id:"开启-web-管理插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开启-web-管理插件"}},[a._v("#")]),a._v(" 开启 web 管理插件")]),a._v(" "),s("p",[a._v("需要先停止rabbitmq服务，进入rabbitmq的安装目录，然后执行下面命令，再重新运行rabbitmq服务。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rabbitmq-plugins "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" rabbitmq_management\n")])])]),s("p",[a._v("开启服务后，进入web界面，地址是http://ip:15672")]),a._v(" "),s("h4",{attrs:{id:"问题解决"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题解决"}},[a._v("#")]),a._v(" 问题解决")]),a._v(" "),s("p",[s("strong",[a._v("如果进不去的话，可以看下防火墙有没有关掉。")])]),a._v(" "),s("ul",[s("li",[a._v("关闭防火墙：")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("systemctl stop firewalld.service\n")])])]),s("ul",[s("li",[a._v("查看防火墙状态：")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("systemctl status firewalld.service\n")])])]),s("ul",[s("li",[a._v("下次开机也关闭防火墙：")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("systemctl disable firewalld.service\n")])])]),s("p",[s("strong",[a._v("如果还是进不去，进入rabbitmq的安装目录的bin目录中执行命令：")])]),a._v(" "),s("ol",[s("li",[a._v("先查看rabbitmq的安装目录，可以先进入第一个文件夹中看看是否安装到该目录(看下该目录中是否有bin目录)")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("whereis")]),a._v(" rabbitmq\n")])])]),s("p",[s("img",{attrs:{src:"https://file.qaomuu.com/blog/iY0dOvsf_x35UxW1aNrFJ7PVl3SzlPOJOAs_452W9MU.png",alt:"image"}})]),a._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[a._v("进入安装目录后执行下面命令：")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rabbitmq-plugins "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" rabbitmq_management\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[a._v("执行后，重启rabbitmq服务（先停止，再启动，然后查看状态是否运行）：")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("/sbin/service rabbitmq-server stop\n/sbin/service rabbitmq-server start\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[a._v("此时进入web界面即可看到内容")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://file.qaomuu.com/blog/Qg1cQ85BZn58Uvt2E8gtoE_6npHSmclOIgvwz9zwQVo.png",alt:"image"}})]),a._v(" "),s("h2",{attrs:{id:"设置权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置权限"}},[a._v("#")]),a._v(" 设置权限")]),a._v(" "),s("p",[a._v("使用默认账号密码(guest)登录，会发现登录不上，该账号只支持本地登录，所以需要设置新的账号和设置权限。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://file.qaomuu.com/blog/AkP0ssuNdu0oOqaRQSmOOO98ctkWJsp5u1dgcx34x1E.png",alt:"image"}})]),a._v(" "),s("h3",{attrs:{id:"创建账号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建账号"}},[a._v("#")]),a._v(" 创建账号")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rabbitmqctl add_user 用户名 密码\n")])])]),s("p",[s("img",{attrs:{src:"https://file.qaomuu.com/blog/314u0s4W0E-4FIFbNDDQzPKlWAAqxXB8t7cAgrE0ZVI.png",alt:"image"}})]),a._v(" "),s("h3",{attrs:{id:"设置用户角色"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置用户角色"}},[a._v("#")]),a._v(" 设置用户角色")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rabbitmqctl set_user_tags vh 用户名 权限"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("administrator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("p",[s("img",{attrs:{src:"https://file.qaomuu.com/blog/_aua5GSLj7Md951ba27nhRJBdvXOAQI_bHI0cbo0tVY.png",alt:"image"}})]),a._v(" "),s("h3",{attrs:{id:"设置用户权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置用户权限"}},[a._v("#")]),a._v(" 设置用户权限")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rabbitmqctl set_permissions "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-p "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("vhostpath"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("user"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("conf"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("write"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("read"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 案例：用户 admin 具有/vhost1 这个 virtual host 中所有资源的配置、写、读权限")]),a._v("\nrabbitmqctl set_permissions "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/"')]),a._v(" admin "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('".*"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('".*"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('".*"')]),a._v("\n")])])]),s("p",[s("img",{attrs:{src:"https://file.qaomuu.com/blog/KwJbuvZ1Bw8oiHBLK5kuHaI6CV4c05hsb5C5W8-n3nU.png",alt:"image"}})]),a._v(" "),s("h3",{attrs:{id:"查询用户和角色"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查询用户和角色"}},[a._v("#")]),a._v(" 查询用户和角色")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v(" rabbitmqctl list_users\n")])])]),s("p",[s("img",{attrs:{src:"https://file.qaomuu.com/blog/7PTotE7coNT8GNXcGJRlQWQevAVi50iCDu_FFFb_aLg.png",alt:"image"}})]),a._v(" "),s("h3",{attrs:{id:"再次登录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#再次登录"}},[a._v("#")]),a._v(" 再次登录")]),a._v(" "),s("p",[a._v("后续可以在web界面添加账户")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://file.qaomuu.com/blog/ooh6QP6ttd-tWlYEYwFcfbPdIJ_ZzsRh3BEm3jUJ2Dk.png",alt:"image"}})]),a._v(" "),s("h3",{attrs:{id:"重置命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重置命令"}},[a._v("#")]),a._v(" 重置命令")]),a._v(" "),s("h4",{attrs:{id:"关闭应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关闭应用"}},[a._v("#")]),a._v(" 关闭应用")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rabbitmqctl stop_app\n")])])]),s("h4",{attrs:{id:"清除"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#清除"}},[a._v("#")]),a._v(" 清除")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rabbitmqctl reset\n")])])]),s("h4",{attrs:{id:"重新启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重新启动"}},[a._v("#")]),a._v(" 重新启动")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("rabbitmqctl start_app\n")])])]),s("h2",{attrs:{id:"docker安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[a._v("#")]),a._v(" Docker安装")]),a._v(" "),s("p",[a._v("拉取镜像")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull rabbitmq:3-management\n")])])]),s("p",[a._v("创建并运行容器：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("RABBITMQ_DEFAULT_USER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("admin "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("RABBITMQ_DEFAULT_PASS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("123123")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" mq "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--hostname")]),a._v(" mq1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15672")]),a._v(":15672 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5672")]),a._v(":5672 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n rabbitmq:3-management\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);